<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Metamorphic Fractal Reflections ‚Äî A Psychedelic Journey towards Ego Death</title>
  <meta name="description" content="An immersive, OLED‚Äëblack portfolio page showcasing 'Metamorphic Fractal Reflections' ‚Äî concept, process, video, and tech stack." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Hero CSS from main site -->
  <link rel="stylesheet" href="css/hero.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/sections.css">
  <link rel="stylesheet" href="css/bot.css">
  <link rel="stylesheet" href="css/psychedelic-journey.css">
</head>
<body>
  <div class="grain" aria-hidden="true"></div>
  <div class="cursor" aria-hidden="true"></div>
  <div class="cursor-glow" id="cursor-glow"></div>

  <!-- Navigation -->
  <nav class="nav" id="nav" aria-label="Primary">
    <div class="container">
      <a href="./index.html#work" class="logo kinetic" id="logo" data-magnetic>‚Üê Back</a>
      <div class="nav-meta">Psychedelic Journey ¬∑ 2024</div>
    </div>
  </nav>

  <!-- Progress Bar -->
  <div class="progress-bar" id="progress-bar"></div>

  <!-- Hero - Psychedelic Journey with glassmorphic styling -->
  <header id="home" class="hero" aria-label="Hero">
    <div class="ribbon" aria-hidden="true"></div>
    <!-- Hero Card with 3D Effect -->
    <div class="hero-inner" id="heroCard">
      <span class="kicker">Classroom Project ¬∑ Immersive Installation</span>
      <h1 class="title"><span class="aura" data-text="Metamorphic Fractal Reflections">Metamorphic Fractal Reflections</span><br/>A Psychedelic Journey towards Ego Death</h1>
      <p class="sub">
        The participant steps into a bathroom, turns on the tap, and watches their reflection dissolve. Pulled through the mirror, they traverse a trippy multiverse of liquid color, pattern‚Äëcreatures and structureless yet beautiful music, guided by a fading companion until reality calls them home.
      </p>
      <div class="meta-clean">
        <div class="meta-row">
          <span class="meta-label">Duration</span>
          <span class="meta-value">Two months</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Team</span>
          <span class="meta-value">Jignesh Khakar ¬∑ Shoban Shah ¬∑ Kaushal Sapre ¬∑ Mochu ¬∑ Suvani Suri ¬∑ Arshad Pathan ¬∑ Ravishekhar Aradhya</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Based on</span>
          <span class="meta-value">Timothy Leary's <em>The Psychedelic Experience</em> (after the Tibetan Book of the Dead)</span>
        </div>
        <div class="meta-row">
          <span class="meta-label">Goal</span>
          <span class="meta-value">Safe, accessible encounters with ego‚Äëdissolution themes</span>
        </div>
      </div>
      <div class="cta">
        <a class="btn primary" href="#experience" aria-label="Jump to the video experience">Watch experience ‚ñ∂</a>
        <a class="btn" href="#process">See process</a>
      </div>
    </div>
  </header>

  <!-- Glass cursor (OUTSIDE hero for proper positioning) -->
  <div class="glass-cursor" aria-hidden="true" id="glass"></div>

  <!-- Theme Toggle -->
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
    <span class="theme-icon">üåô</span>
  </button>

  <main>
    <!-- Experience / Video -->
    <section id="experience">
      <div class="wrap">
        <h2 class="reveal">Experience Film</h2>
        <p class="lead reveal">A short capture of the installation and the mirror‚Äëportal moment. Replace the placeholder source with your final render or Vimeo/YouTube embed.</p>
        <div class="video-wrap reveal">
          <!-- Replace the source below with your file. Example: src="/assets/metamorphic-fractal-reflections.mp4" -->
          <video id="experienceVideo" controls playsinline preload="metadata" poster="" aria-label="Metamorphic Fractal Reflections video">
            <source src="" type="video/mp4" />
            <!-- If hosting on Vimeo/YouTube, comment out the <video> above and paste an <iframe> embed here.  -->
          </video>
          <div class="video-veil" aria-hidden="true"></div>
        </div>
        <div class="caption">Tip: Serve H.264 MP4 + WebM for best browser coverage. Keep it near 8‚Äì12&nbsp;Mbps for crisp results.</div>
      </div>
    </section>

    <!-- Concept / Narrative -->
    <section id="concept">
      <div class="wrap">
        <h2 class="reveal">Concept</h2>
        <div class="grid">
          <article class="card reveal">
            <p>
              The viewers confront death‚Äëlike states within an immersive environment. The design intentionally mirrors bardo‚Äëlike passages: loss of ordinary identity, surrender to sensory overload, and re‚Äëemergence with insight. While intense, the aesthetic stays tender and humane, allowing participants to form meaning without prescriptive narrative.
            </p>
          </article>
          <article class="card reveal">
            <p>
              Soundscapes avoid rigid structure‚Äîfree‚Äëflowing, emergent, and deeply textural‚Äîwhile visuals behave like sentient reflections (pattern‚Äëcreatures) born from light itself. The guide archetype appears briefly as a compassionate presence and then recedes, respecting autonomy as reality reasserts itself.
            </p>
          </article>
        </div>
      </div>
    </section>

    <!-- Process Timeline -->
    <section id="process">
      <div class="wrap">
        <div class="timeline">
          <aside class="rail">
            <h2>Process</h2>
            <div class="progress" aria-hidden="true"><i id="bar"></i></div>
          </aside>
          <div>
            <div class="step reveal">
              <h3>Research</h3>
              <p>Reading Timothy Leary, Terence McKenna, and Ram Dass; exploring psychedelic subreddits; browsing Erowid for trip reports and safety learnings.</p>
              <div class="step-expanded">
                <div class="step-image-placeholder">Research Materials Preview</div>
                <div class="step-details">
                  Deep dive into psychedelic literature and trip reports. Key findings included optimal duration timing, safety protocols, and the importance of set and setting for meaningful experiences.
                </div>
              </div>
            </div>
            <div class="step reveal">
              <h3>Conceptualization</h3>
              <p>Ideating across mediums to distill a bathroom‚Äìmirror portal motif and an ego‚Äëdissolution arc. Mapping sensory stages and consent guardrails.<br/>
                <a href="#" id="miro" rel="noopener">MIRO LINK</a></p>
              <div class="step-expanded">
                <div class="step-image-placeholder">Concept Sketches & Mind Maps</div>
                <div class="step-details">
                  Initial wireframes exploring the bathroom-to-mirror transition. Documented the user journey from normal reflection to dissolution, including safety exit points and emotional checkpoints.
                </div>
              </div>
            </div>
            <div class="step reveal">
              <h3>3D Modelling</h3>
              <p>Blocking the environment in 3D and reviewing the flow in VR to validate spatial pacing before fabrication.</p>
              <div class="step-expanded">
                <div class="step-image-placeholder">3D Models & VR Testing</div>
                <div class="step-details">
                  Created detailed Blender models of the bathroom space with accurate dimensions. VR walkthroughs helped validate user flow and identify optimal trigger points for the mirror transition effect.
                </div>
              </div>
            </div>
            <div class="step reveal">
              <h3>Construction of Metal Frame</h3>
              <p>Welding a stable metal skeleton to support panels, mirror assembly, and embedded sensors.</p>
            </div>
            <div class="step reveal">
              <h3>Building the Bathroom</h3>
              <p>Plywood superstructure with granite finishes for realistic tactility; concealed cable runs to keep the illusion intact.</p>
            </div>
            <div class="step reveal">
              <h3>Visuals</h3>
              <p>Generating video sequences using Deforum Stable Diffusion; comparing models, samplers, steps, prompt embeddings for the most organic motion feel.</p>
              <div class="step-expanded">
                <div class="step-image-placeholder">Generated Visual Sequences</div>
                <div class="step-details">
                  Tested various Stable Diffusion models including v1.5, v2.1, and custom dreambooth models. Fine-tuned prompts for smooth morphing between abstract patterns and recognizable forms, achieving seamless ego-dissolution visuals.
                </div>
              </div>
            </div>
            <div class="step reveal">
              <h3>TouchDesigner + Arduino</h3>
              <p>Tap‚Äësensor input triggers the mirror dissolve; TouchDesigner orchestrates video, audio and light; Arduino handles IO and safety failsafes.</p>
            </div>
            <div class="step reveal">
              <h3>Testing</h3>
              <p>Every viewer experiences different visuals and timing. Iterative tests tuned thresholds, volume and fade‚Äëcurves to keep it safe yet profound.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Visuals Gallery (placeholder images) -->
    <section id="visuals">
      <div class="wrap">
        <h2 class="reveal">Stills & Frames</h2>
        <p class="lead reveal">Drop your favorite renders or documentation stills below. Replace the placeholders with your assets.</p>
        <div class="gallery">
          <figure class="shot reveal"><img src="https://picsum.photos/1280/800?random=1" alt="Fractal still placeholder 1"></figure>
          <figure class="shot reveal"><img src="https://picsum.photos/1280/800?random=2" alt="Fractal still placeholder 2"></figure>
          <figure class="shot reveal"><img src="https://picsum.photos/1280/800?random=3" alt="Fractal still placeholder 3"></figure>
          <figure class="shot reveal"><img src="https://picsum.photos/1280/800?random=4" alt="Fractal still placeholder 4"></figure>
        </div>
      </div>
    </section>

    <!-- Tech stack -->
    <section id="stack">
      <div class="wrap">
        <h2 class="reveal">Tech Stack</h2>
        <div class="chips reveal" aria-label="Technologies used">
          <span class="chip">TouchDesigner</span>
          <span class="chip">Arduino</span>
          <span class="chip">Deforum Stable Diffusion</span>
          <span class="chip">VR Previz</span>
          <span class="chip">Granite ¬∑ Plywood</span>
          <span class="chip">Audio‚ÄëReactive SFX</span>
          <span class="chip">Safety & Consent Flow</span>
        </div>
      </div>
    </section>

    <!-- Notes / Ethics -->
    <section id="ethics">
      <div class="wrap">
        <h2 class="reveal">Notes on Ethics & Safety</h2>
        <div class="grid">
          <article class="card reveal">
            <p>Inspired by <em>The Psychedelic Experience</em> (Leary et al.), the installation frames ego‚Äëdissolution symbolically‚Äîno substances involved. The environment includes clear opt‚Äëout, calming lights on exit, and staff‚Äëvisible safety indicators.</p>
          </article>
          <article class="card reveal">
            <p>Accessibility: subtitles for audio sequences, path lighting, and a seated option near the mirror. Motion intensity respects <code>prefers‚Äëreduced‚Äëmotion</code>.</p>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap" style="padding-bottom:80px">
      <div class="lead" style="color:var(--fg-soft)">¬© Project by Nihar ‚Äî Product & New Media Design. Built as an OLED‚Äëblack, lightweight page with subtle psychedelic aura effects.</div>
    </div>
  </footer>

  <script>
  // Reveal on view
  const io = new IntersectionObserver((entries)=>{
    for(const e of entries){ if(e.isIntersecting){ e.target.classList.add('on'); io.unobserve(e.target); } }
  }, {threshold:.15});
  document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

  // Reading progress for the timeline rail
  const bar = document.getElementById('bar');
  const process = document.getElementById('process');
  const onScroll = ()=>{
    const rect = process.getBoundingClientRect();
    const h = window.innerHeight; const total = rect.height - h; const done = Math.min(Math.max(h - rect.top, 0), rect.height);
    const p = Math.max(0, Math.min(1, done / (total || 1)));
    bar.style.width = (p*100).toFixed(2) + '%';
  };
  addEventListener('scroll', onScroll, {passive:true}); onScroll();

  // Subtle cursor prism effect
  const cursor = document.querySelector('.cursor');
  let cx = innerWidth/2, cy = innerHeight/2;
  const track = (e)=>{ cx = e.clientX; cy = e.clientY; cursor.style.opacity = .55; };
  const fade = ()=>{ cursor.style.opacity = .0; };
  addEventListener('pointermove', track, {passive:true});
  addEventListener('pointerleave', fade, {passive:true});
  const animate = ()=>{ cursor.style.transform = `translate(${cx-120}px, ${cy-120}px)`; requestAnimationFrame(animate); };
  animate();

  // Optional: quick Vimeo/YouTube embed helper
  // Usage: set data-embed="vimeo://VIDEO_ID" or "youtube://VIDEO_ID" on #experienceVideo and it will replace with an iframe.
  (function(){
    const v = document.getElementById('experienceVideo');
    const spec = v?.dataset?.embed; if(!spec) return;
    const [provider, id] = spec.split('://');
    const wrap = v.parentElement; v.remove();
    const ifr = document.createElement('iframe');
    let src = '';
    if(provider==='vimeo'){ src = `https://player.vimeo.com/video/${id}?badge=0&autopause=0&player_id=0&app_id=122963` }
    if(provider==='youtube'){ src = `https://www.youtube.com/embed/${id}?rel=0&modestbranding=1` }
    ifr.setAttribute('src', src);
    ifr.setAttribute('title','Experience Film');
    ifr.setAttribute('frameborder','0');
    ifr.setAttribute('allow','autoplay; fullscreen; picture-in-picture');
    ifr.setAttribute('allowfullscreen','');
    ifr.style.width='100%'; ifr.style.aspectRatio='16/9';
    wrap.prepend(ifr);
  })();

  // Navigation and progress bar functionality
  window.addEventListener('scroll', () => {
    // Update progress bar
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    document.getElementById('progress-bar').style.width = scrolled + '%';

    // Show/hide nav based on scroll position
    const nav = document.getElementById('nav');
    const scrollY = window.scrollY || window.pageYOffset;

    if (scrollY > 100) {
      nav.classList.add('visible');
      document.body.classList.add('scrolled');
    } else if (scrollY === 0) {
      nav.classList.remove('visible');
      document.body.classList.remove('scrolled');
    }
  });

  // Enhanced cursor glow effect for Mac compatibility
  const cursorGlow = document.getElementById('cursor-glow');
  if (cursorGlow) {
    let mouseX = 0, mouseY = 0;
    let glowX = 0, glowY = 0;

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      cursorGlow.style.opacity = '0.6';
    });

    // Smooth cursor follow
    function animateCursor() {
      glowX += (mouseX - glowX) * 0.1;
      glowY += (mouseY - glowY) * 0.1;

      cursorGlow.style.transform = `translate(${glowX - 200}px, ${glowY - 200}px)`;
      requestAnimationFrame(animateCursor);
    }
    animateCursor();

    // Hide cursor glow on mouse leave
    document.addEventListener('mouseleave', () => {
      cursorGlow.style.opacity = '0';
    });
  }

  // Sequential Step Expansion
  const steps = document.querySelectorAll('.step');
  let expandedStep = null;

  steps.forEach((step, index) => {
    step.addEventListener('mouseenter', () => {
      // Collapse previous step if any
      if (expandedStep && expandedStep !== step) {
        expandedStep.classList.remove('expanded');
      }

      // Expand current step
      step.classList.add('expanded');
      expandedStep = step;
    });

    step.addEventListener('mouseleave', () => {
      // Add a small delay before collapsing to prevent flickering
      setTimeout(() => {
        if (!step.matches(':hover')) {
          step.classList.remove('expanded');
          if (expandedStep === step) {
            expandedStep = null;
          }
        }
      }, 100);
    });
  });

  // Theme Toggle Functionality
  const themeToggle = document.getElementById('themeToggle');
  const themeIcon = document.querySelector('.theme-icon');

  // Initialize theme from localStorage or default to dark
  const currentTheme = localStorage.getItem('theme') || 'dark';
  document.documentElement.setAttribute('data-theme', currentTheme);
  themeIcon.textContent = currentTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';

  themeToggle.addEventListener('click', () => {
    const isLight = document.documentElement.getAttribute('data-theme') === 'light';
    const newTheme = isLight ? 'dark' : 'light';

    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    themeIcon.textContent = newTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
  });

  // Initialize elegant bot
  // Bot will be initialized by chat.js
  </script>

  <!-- Elegant Bot Script -->
  <script src="js/chat.js"></script>
</body>
</html>